---
title: 我是如何搭建这个博客的
date: 2017-09-04 11:00:38
tags:  [Node.js,Hexo,Github]
---
## 前言#
本文是在此博客搭建过程中所写，主要目的是为了记录搭建该博客的过程，一方面希望这篇文章能够成为此博客不断更新完善的引擎，另一方面或许能够帮助像我一样想要搭建独立博客的小白,然而本文写的并不十分详细，如果要深入探究，可以访问文末的参考网站。
本文诸多资料据来自互联网，结尾会将来源列举，感谢这些大牛们。
## 为什么要搭建一个独立博客
在学习的过程中需要对所学内容有所记录，所谓好记性不如烂笔头，而很多存储方式不直观，不利于回顾重温，记录博客是一个很好的方式。
至于为什么使用独立博客，引用别人的一句话：
> 独立的才是自己的。

## 为什么选择Github Pages？
* GitHub Pages 有 300M 免费空间，资料自己管理，保存可靠；
* 学着用 GitHub，享受 GitHub 的便利，上面有很多大牛，眼界会开阔很多；
* GitHub 工作原理决定，能够接触到最好的团队协作流程；
* GitHub 是一种趋势；

## 购买域名
在Godaddy上购买是一个安全的选择，且支持支付宝支付。
* 输入你想要的域名，查到适合的域名之后选择「添加到购物车」。
* 取消不必要的服务，支付付款。

## 安装准备软件
[Node.js](https://nodejs.org/en/)  

[Hexo](https://hexo.io/)是一个基于Node.js的静态博客程序，其编译上百篇文字只需要几秒，hexo生成的静态网页可直接放到GitHub Pages，BAE等平台上。

 [Git](https://github.com/)

 此博客是基于Github Pages平台上的。
## 怎么打开Git？#
#### Win 平台操作

* 开始菜单 Git Bash
* 鼠标右键打开 Git Bash

#### Mac 平台操作
* 安装 Git 之后可直接在 Terminal 操作

#### 注册 GitHub
访问[Github](https://github.com/)
注册你的Github账号
### 配置和使用 GitHub
#### GitHub创建个人仓库

点击GitHub中的New repository创建新仓库，
仓库名应该为：用户名.github.io

这个用户名使用你的GitHub帐号名称代替，这是固定写法

> 比如我的就是 lorensun.github.io

#### 配置 SSH keys
我们用 SSH keys 让本地 git 项目与远程的 GitHub 建立联系.
#### 检查 SSH keys的设置
首先我们需要检查你电脑上现有的 ssh key：

安装成功后，将你的Git与GitHub帐号绑定，鼠标右击打开Git Bash，输入

 ``$ cd ~/.ssh ``   
 检查本机的ssh密钥

 如果提示：No such file or directory 说明你是第一次使用 git。
#### 生成新的 SSH Key：

设置user.name和user.email配置信息：

``git config --global user.name "你的GitHub用户名"``

``git config --global user.email "你的GitHub注册邮箱"``

####生成ssh密钥文件：

``ssh-keygen -t rsa -C "你的GitHub注册邮箱" ``

然后直接三个回车即可，默认不需要设置密码
然后找到生成的.ssh的文件夹中的id_rsa.pub密钥，将内容全部复制

打开[GitHub_Settings_keys](https://github.com/settings/keys)页面，新建new SSH Key

Title为标题，任意填即可，将刚刚复制的id_rsa.pub内容粘贴进去，最后点击Add SSH key。

在Git Bash中检测GitHub公钥设置是否成功，输入

``ssh git@github.com ``

若出现Hi "你的用户名" 字样，则代表设置成功

## 安装Node.js
安装[Node.js](https://nodejs.org/en/) 。
安装后

检测Node.js是否安装成功，在命令行中输入 node -v :

检测npm是否安装成功，在命令行中输入npm -v :

到这了，安装Hexo的环境已经全部搭建完成。

### 安装Hexo

Hexo就是我们的个人博客网站的框架， 这里需要自己在电脑常里创建一个文件夹，可以命名为Blog，Hexo框架与以后你自己发布的网页都在这个文件夹中。创建好后，进入文件夹中，按住shift键，右击鼠标点击命令行，使用npm命令安装Hexo，输入：

``npm install -g hexo-cli ``

这个安装时间较长耐心等待，安装完成后，初始化我们的博客，输入：

``hexo init blog``

注意，这里的命令都是作用在刚刚创建的Blog文件夹中。

然后进入最新创建的blog文件夹，按住shift键，右击鼠标点击命令行，分别按顺序输入以下三条命令：

``hexo new test_my_site``

``hexo g``

``hexo s``

这些命令在后面作介绍，完成后，打开浏览器输入地址：

``localhost:4000``

可以看出我们得到了hexo的第一篇博客模板。

现在来介绍常用的Hexo 命令

>npm install hexo -g #安装Hexo

>npm update hexo -g #升级

>hexo init #初始化博客

命令简写
> hexo n "我的博客" == hexo new "我的博客" #新建文章

> hexo g == hexo generate #生成

> hexo s == hexo server #启动服务预览

> hexo d == hexo deploy #部署

> hexo server #Hexo会监视文件变动并自动更新，无须重启服务器
> hexo server -s #静态模式
> hexo server -p 5000 #更改端口
> hexo server -i 192.168.1.1 #自定义 IP
> hexo clean #清除缓存，若是网页正常情况下可以忽略这条命令

刚刚的三个命令

``hexo new test_my_site``

``hexo g``

``hexo s``

依次是新建一篇博客文章、生成网页、在本地预览的操作。

## 推送网站

上面只是在本地预览，接下来要做的就是就是推送网站，也就是发布网站，让我们的网站可以被更多的人访问。在设置之前，需要解释一个概念，在blog根目录里的_config.yml文件称为站点配置文件。

进入根目录里的themes文件夹，里面也有个_config.yml文件，这个称为主题配置文件。


下一步将我们的Hexo与GitHub关联起来，打开站点的配置文件_config.yml，翻到最后修改为：

``deploy: ``

``type: git``

``repo: 这里填入你之前在GitHub上创建仓库的完整路径，记得加上 .git``

``branch: master``


保存站点配置文件。

其实就是给hexo d 这个命令做相应的配置，让hexo知道你要把blog部署在哪个位置，很显然，我们部署在我们GitHub的仓库里。最后安装Git部署插件，输入命令：

``npm install hexo-deployer-git --save``

这时，我们分别输入三条命令：

``hexo clean ``

``hexo g``

``hexo d``

其实第三条的 hexo d 就是部署网站命令，d是deploy的缩写。完成后，打开浏览器，在地址栏输入你的放置个人网站的仓库路径，即 xxxx.github.io

xxxx就是GitHub用户名.

> 比如我的就是 lorensun.github.io


此时会发现你的博客已经上线了，可以在网络上被访问。

## 绑定域名

虽然在Internet上可以访问我们的网站，但是网址是GitHub提供的: xxxx.github.io

而我们想使用我们自己的个性化域名，这就需要绑定我们自己的域名。

可以使用[DNSPOD](https://www.dnspod.cn/console/dashboard)的域名绑定，在国内主流的域名代理厂商也就阿里云和腾讯云。登录到DNNSPOD，注册一个账号,进入管理控制台的域名列表，输入你的个性化域名，进入解析。

第一步，增加 A 的两条记录指向的ip地址是 GitHub Pages 的提供的 ip

* 192.30.252.153
* 192.30.252.154

  第三个记录类型是CNAME，CNAME的记录值是：你的用户名.http://github.io
这里千万别弄错了。

第二步，登录GitHub，进入之前创建的仓库，点击settings，设置Custom domain，输入你的域名，点击save保存。

第三步，进入本地博客文件夹 ，进入blog/source目录下，创建一个记事本文件，输入你的域名，保存，命名为CNAME ，注意保存成所有文件而不是txt文件。

完成这三步，进入blog目录中，按住shift键右击打开命令行，依次输入：

``hexo clean``

``hexo g``

``hexo d``

这时候打开浏览器在地址栏输入你的个性化域名将会直接进入你自己搭建的网站。

#### 至此，你的网站便可以任意访问，另外还有很多细节内容，以后再写。





## 参考资料
* [GitHub+Hexo 搭建个人网站详细教程](https://zhuanlan.zhihu.com/p/26625249)（推荐）
* [如何搭建一个独立博客——简明 GitHub Pages与 jekyll 教程](http://www.cnfeat.com/blog/2014/05/10/how-to-build-a-blog/)
* [使用 GitHub, Jekyll 打造自己的免费独立博客](http://blog.csdn.net/on_1y/article/details/19259435)
* [hexo入门（安装，配置，本地启动）](http://blog.csdn.net/wangnan9279/article/details/44535627)
* [hexo教程系列——hexo安装教程](http://blog.csdn.net/xuezhisdc/article/details/53130328)
* [Markdown——入门指南](http://www.jianshu.com/p/1e402922ee32/)

## 参考网站
* [GitHub Pages主页](https://pages.github.com/)
* [GoDaddy](http://www.godaddy.com/)
* [NDSPOD](www.dnspod.cn)
* [Hexo官方主页](https://hexo.io/)
